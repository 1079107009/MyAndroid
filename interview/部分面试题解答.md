# 部分面试题解答（仅供参考）

这个答案不是死板的，可以结合开发案例具体讲解的。这里仅供参考。由于时间有限，不可能把每个题都写一份答案出来，希望大家多谅解。再说了，自己去找答案不是更能提高自己吗？

> 什么是ANR 如何避免它？

在Android 上，如果你的应用程序有一段时间响应不够灵敏，系统会向用户显示一个对话框，这个对话框称作应
用程序无响应（ANR：Application Not Responding）对话框。用户可以选择让程序继续运行，但是，他们在使用你的应用程序时，并不希望每次都要处理这个对话框。因此，在程序里对响应性能的设计很重要，这样，系统不会显示ANR 给用户。
不同的组件发生ANR 的时间不一样，主线程（Activity、Service）是 5 秒，BroadCastReceiver 是 10 秒。

**解决方案：**
将所有耗时操作，比如访问网络，Socket 通信，查询大量SQL 语句，复杂逻辑计算等都放在子线程中去，然后通过handler.sendMessage、runonUITread、AsyncTask 等方式更新UI。无论如何都要确保用户界面操作的流畅度。
如果耗时操作需要让用户等待，那么可以在界面上显示进度条。

> synchronized 和volatile 关键字的区别？

synchronized 和volatile的作用：
1）保证了不同线程对这个变量进行操作时的可见性，即一个线程修改了某个变量的值，这新值对其他线程来说是立即可见的。
2）禁止进行指令重排序。
volatile 本质是在告诉jvm 当前变量在寄存器（工作内存）中的值是不确定的，需要从主存中读取；synchronized 则是锁定当前变量，只有当前线程可以访问该变量，其他线程被阻塞住。
区别：
1）volatile 仅能使用在变量级别；synchronized 则可以使用在变量、方法、和类级别的
2）volatile 仅能实现变量的修改可见性，并不能保证原子性；synchronized 则可以保证变量的修改可见性和原子性
3）volatile 不会造成线程的阻塞；synchronized 可能会造成线程的阻塞。
4）volatile 标记的变量不会被编译器优化；synchronized 标记的变量可以被编译器优化